document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("#myTabContent")){let t=[],n=[];fetch("assets/json/email-list.json").then((e=>e.json())).then((s=>{t=s.primary||[],n=s.promotions||[];const r=a("primaryTable",t),i=a("promotionsTable",n);document.querySelectorAll(".nav-link").forEach((e=>{e.addEventListener("click",(function(){const a=e.getAttribute("aria-controls");"pills-primary"===a?r.clear().rows.add(t).draw():"pills-promotions"===a&&i.clear().rows.add(n).draw()}))})),e(r),e(i)})).catch((e=>{console.error("Error loading JSON data:",e)}));const a=(e,t)=>new DataTable(`#${e}`,{data:t,columns:[{data:"id"},{data:"id"},{data:"fullName"},{data:"serviceType"},{data:"mailTime"},{data:"Actions"}],columnDefs:[{targets:0,orderable:!1,searchable:!1,checkboxes:{selectAllRender:'<input type="checkbox" class="form-check-input">'},render:function(){return'<input type="checkbox" class="dt-checkboxes form-check-input">'}},{targets:1,orderable:!1,searchable:!1,render:function(){return'<button type="button" class="btn btn-light icon-btn-sm p-1 fs-13 rounded-pill custom-toggle">\n                                    <span class="icon-on">\n                                        <i class="ri-star-fill text-muted"></i>\n                                    </span>\n                                    <span class="icon-off">\n                                        <i class="ri-star-line text-muted"></i>\n                                    </span>\n                                </button>'}},{targets:2,render:function(e,t,n){return`<a href="apps-email-view.html" class="text-truncate">\n                                    <p class="mb-0 fw-medium">${n.fullName}</p>\n                                </a>`}},{targets:3,render:function(e,t,n){return`<div class="d-flex align-items-center gap-2 max-w-620px">\n                                    <p class="mb-0 fw-medium flex-shrink-0">${n.mailTitle}</p>\n                                    <span class="flex-shrink-0">-</span>\n                                    <p class="mb-0 fw-normal text-muted text-truncate flex-grow-1">${n.mailDescription}</p>\n                                </div>\n                            `}},{targets:5,searchable:!1,orderable:!1,render:function(){return'\n                            <div class="hstack gap-2 fs-15">\n                                <a href="apps-email-view.html" class="btn icon-btn-sm btn-light-primary">\n                                    <i class="ri-eye-line"></i>\n                                </a>\n                                <a href="#!" class="btn icon-btn-sm btn-light-danger delete-item">\n                                    <i class="ri-delete-bin-line"></i>\n                                </a>\n                            </div>\n                        '}}],order:[[4,"asc"]],paging:!0,language:{sLengthMenu:"Show _MENU_",search:"",searchPlaceholder:"Search Files",paginate:{next:'<i class="ri-arrow-right-s-line"></i>',previous:'<i class="ri-arrow-left-s-line"></i>'}},tableLayout:"fixed",lengthMenu:[10,20,50],dom:'<"table-responsive"t><"p-4 d-flex flex-column flex-sm-row justify-content-between align-items-center gap-2"i<"d-flex align-items-sm-center justify-content-end gap-4">p>'});function e(e){e.table().node().addEventListener("click",(function(t){if(t.target.classList.contains("delete-item")){const n=t.target.closest("tr");Swal.fire({title:"Are you sure?",text:"This action will delete the record permanently.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0}).then((t=>{t.isConfirmed&&e.row(n).remove().draw()}))}}))}document.addEventListener("change",(function(e){if(e.target&&e.target.classList.contains("dt-checkboxes")){const t=e.target.closest("tr");e.target.checked?t.classList.add("selected"):t.classList.remove("selected")}}))}document.querySelector(".lightbox")&&GLightbox({selector:".lightbox",title:!1})}));const editors=document.querySelectorAll('[data-editor="replay-email"]');editors.forEach((e=>{new Quill(e,{theme:"snow",modules:{toolbar:!0},placeholder:"Compose your content here..."})}));