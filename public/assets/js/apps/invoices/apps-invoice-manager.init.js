"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".dt-invoice-list");if(e){const t=new DataTable(e,{ajax:"assets/json/invoice-list.json",columns:[{data:"id"},{data:"fullName"},{data:"dateIssued"},{data:"contactEmail"},{data:"status"},{data:"action"}],columnDefs:[{targets:0,render:function(e,t,n){return`<a href="#!"><span>#${n.id}</span></a>`}},{targets:1,render:function(e,t,n){return`\n                        <div class="d-flex gap-3 justify-content-start align-items-center">\n                            <img src="${n.avatarImage}" alt="Avatar" class="avatar avatar-sm border-0 avatar-item">\n                            <div class="d-flex flex-column">\n                                <a href="apps-invoices-details.html" class="text-truncate text-heading">\n                                    <p class="mb-0 fw-medium">${n.fullName}</p>\n                                </a>\n                                <small class="text-truncate">${n.serviceType}</small>\n                            </div>\n                        </div>\n                    `}},{targets:4,render:function(e,t,n){return{Sent:`<span class="badge bg-success-subtle text-success text-uppercase">${n.status}</span>`,Draft:`<span class="badge bg-primary-subtle text-primary text-uppercase">${n.status}</span>`,"Past Due":`<span class="badge bg-danger-subtle text-danger text-uppercase">${n.status}</span>`,"Partial Payment":`<span class="badge bg-success-subtle text-success text-uppercase">${n.status}</span>`,Paid:`<span class="badge bg-warning-subtle text-warning text-uppercase">${n.status}</span>`,Pending:`<span class="badge bg-info-subtle text-info text-uppercase">${n.status}</span>`}[n.status]||`<span class="badge bg-secondary">${n.status}</span>`}},{targets:5,searchable:!1,orderable:!1,render:function(){return'\n                        <div class="dropdown">\n                            <a href="#!" class="btn btn-text-primary rounded-pill icon-btn-sm" data-bs-toggle="dropdown">\n                                <i class="ri-more-2-line fs-16"></i>\n                            </a>\n                            <div class="dropdown-menu dropdown-menu-end">\n                                <a href="#!" class="dropdown-item">Download</a>\n                                <a href="apps-invoices-details.html" class="dropdown-item">View</a>\n                                <a href="apps-create-invoices.html" class="dropdown-item">Edit</a>\n                                <div class="dropdown-divider"></div>\n                                <a href="#!" class="dropdown-item delete-item">Delete</a>\n                            </div>\n                        </div>\n                    '}}],order:[[1,"desc"]],dom:'<"card-header dt-head d-flex flex-column flex-sm-row justify-content-between align-items-center gap-3"<"head-label"><"d-flex flex-column flex-sm-row align-items-sm-center justify-content-end gap-3 w-100"f<"invoice_status">>><"table-responsive"t><"card-footer d-flex flex-column flex-sm-row justify-content-between align-items-center gap-2"i<"d-flex align-items-sm-center justify-content-end gap-4">p>',language:{sLengthMenu:"Show _MENU_",search:"",searchPlaceholder:"Search Invoice",paginate:{next:'<i class="ri-arrow-right-s-line"></i>',previous:'<i class="ri-arrow-left-s-line"></i>'}},lengthMenu:[10,20,50],pageLength:10,initComplete:function(){document.querySelector(".invoice_status").innerHTML='\n                <select id="invoice-status-select" class="form-select">\n                    <option value="all">All</option>\n                    <option value="Paid">Paid</option>\n                    <option value="Pending">Pending</option>\n                    <option value="Sent">Sent</option>\n                    <option value="Draft">Draft</option>\n                </select>\n            ';const e=document.querySelector("#invoice-status-select");new Choices("#invoice-status-select",{searchEnabled:!1,placeholder:!1,itemSelectText:!1}),e.addEventListener("change",(function(){const e=this.value;t.column(4).search("all"===e?"":e).draw()})),document.querySelector("div.head-label").innerHTML='<h5 class="card-title text-nowrap mb-0">Invoice List</h5>'}});e.querySelector("tbody").addEventListener("click",(function(e){if(e.target.classList.contains("delete-item")){const n=e.target.closest("tr");Swal.fire({title:"Are you sure?",text:"This action will delete the record permanently.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0}).then((e=>{e.isConfirmed&&t.row(n).remove().draw()}))}})),setTimeout((function(){const e=document.querySelector(".dataTables_filter .form-control"),t=document.querySelector(".dataTables_length .form-select");e&&e.classList.remove("form-control-sm"),t&&t.classList.remove("form-select-sm")}),300)}const t={chart:{height:240,type:"donut"},labels:["Draft Invoices","Paid Invoices","Pending Invoices","Sent Invoices"],series:[20,30,17,33],colors:["--bs-primary","--bs-success","--bs-warning","--bs-danger"],stroke:{show:!1,curve:"straight"},dataLabels:{enabled:!0,formatter:e=>`${parseInt(e,10)}%`,dropShadow:{enabled:!1}},legend:{show:!0,position:"bottom",markers:{offsetX:-3,width:10,height:10},itemMargin:{vertical:3,horizontal:10}},plotOptions:{pie:{donut:{labels:{show:!0,value:{formatter:e=>`${parseInt(e,10)}%`},total:{show:!0,label:"Draft Invoices",formatter:()=>"20%"}}}}},responsive:[{breakpoint:992,options:{chart:{height:250},legend:{position:"bottom"}}},{breakpoint:576,options:{legend:{show:!1}}}]};allCharts.push([{id:"invoice-list",data:t}]),document.querySelector("#printContent")&&(onload=window.print())}));